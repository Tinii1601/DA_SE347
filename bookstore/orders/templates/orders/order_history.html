{% extends 'users/profile/profile_base.html' %}
{% load static %}

{% block title %}Lịch sử đơn hàng{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/order_history.css' %}">
{% endblock %}

{% block profile_content %}
<div class="order-history">
  <div class="section-heading">
    <h4>Lịch sử đơn hàng</h4>
    <p class="text-muted">Theo dõi trạng thái và xem chi tiết từng đơn.</p>
  </div>

  {% if orders %}
    <div class="order-table">
      <div class="order-table-header">
        <div>Mã đơn hàng</div>
        <div>Thời gian</div>
        <div>Tổng cộng</div>
        <div>Trạng thái</div>
        <div></div>
      </div>
      {% for order in orders %}
        <div class="order-table-row">
          <div class="order-code" data-label="Mã đơn">#{{ order.order_number }}</div>
          <div class="order-date" data-label="Thời gian">{{ order.created_at|date:"d/m/Y H:i" }}</div>
          <div class="order-total" data-label="Tổng cộng">{{ order.total_amount|floatformat:0 }}₫</div>
          <div class="order-status status-{{ order.status }}" data-label="Trạng thái">{{ order.get_status_display }}</div>
          <div class="order-action" data-label="Chi tiết">
            <a href="{% url 'orders:order_detail' order.id %}">Chi tiết đơn hàng</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="order-empty">
      <p>Bạn chưa có đơn hàng nào.</p>
      <a href="{% url 'core:home' %}" class="btn btn-success btn-sm">Mua sắm ngay</a>
    </div>
  {% endif %}
</div>
{% endblock %}
